<!doctype html>
<!-- See http://www.firepad.io/docs/ for detailed embedding docs. -->
<html>

<head>
  <meta charset="utf-8" />

  <!-- p5js -->
  <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
  <!-- <style> body {padding: 0; margin: 0;} </style> -->
  <link rel="stylesheet" href="styles.css" type="text/css">
  <script src="../p5.min.js"></script>
  <script src="../addons/p5.dom.min.js"></script>
  <script src="../addons/p5.sound.min.js"></script>
  <script src="sketch.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/5.0.2/firebase.js"></script>

  <!-- CodeMirror -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.17.0/codemirror.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.17.0/codemirror.css" />

  <!-- Firepad -->
  <link rel="stylesheet" href="styles.css" type="text/css">
  <script src="https://cdn.firebase.com/libs/firepad/1.4.0/firepad.min.js"></script>


</head>

<body onload="init()">

    <div id = "canvasContainer"> </div>
    <div class = "head">
        <div id = "head-0">wellcome</div>
        <div onclick = "showBox('head-2')" id = "head-1">you are at</div>
        <div onclick = "showBox('head-3')" id = "head-2" >the library </div>
        <div onclick = "showBox('head-4')" id = "head-3">this is a place for reading and writing </div>
        <div onclick = "showBox('head-5')" id = "head-4">start topics you find interesting</div>
        <div onclick = "showBox('head-6')" id = "head-5">share links to books and texts</div>
        <div onclick = "showBox('head-6')" id = "head-6">write about things you like</div>
    </div>





  <!-- <div class = "text">
    <div id = "breaker">
        <img src="paper.gif" id = "gif-1" onclick = "showBox('greyBox')">
        <img src="paper.gif" id = "gif-2">
        <img src="paper.gif" id = "gif-3">
        <img src="paper.gif" id = "gif-4">
        <img src="paper.gif" id = "gif-5">

        <div class = "greyBox" id = "question"> why be a designer? </div>
    </div>-->

    <div id = "bookmark" > bookmarks </div>
    <div id = "explanation"> write a tag for a bookmark</div>
  </div>



  <button onclick ="updateName()"> submit </button>

  <div class = "links">
      <li onclick ="firepadStyles('firepad-0')">
        <a href="#firepad-0">a</a>
        <input onblur="submitText('input-0')" type = "text" id = "input-0">
      </li>
      <li onclick ="firepadStyles('firepad-1')">
        <a href="#firepad-1">b</a>
        <input onblur="submitText('input-1')" type = "text" id = "input-1">
      </li>
      <li onclick ="firepadStyles('firepad-2')">
        <a href="#firepad-2">c</a>
        <input onblur="submitText('input-2')" type = "text" id = "input-2">
      </li>
      <li onclick ="firepadStyles('firepad-3')">
        <a href="#firepad-3">d</a>
        <input  onblur="submitText('input-3')" type = "text" id = "input-3">
      </li>
      <li onclick ="firepadStyles('firepad-4')">
        <a href="#firepad-4">e</a>
        <input  onblur="submitText('input-4')" type = "text" id = "input-4">
      </li>
      <li onclick ="firepadStyles('firepad-5')">
        <a href="#firepad-5">f</a>
        <input  onblur="submitText('input-5')" type = "text" id = "input-5">
      </li>
      <li onclick ="firepadStyles('firepad-6')">
        <a href="#firepad-6">g</a>
        <input  onblur="submitText('input-6')" type = "text" id = "input-6">
      </li>
      <li onclick ="firepadStyles('firepad-7')">
        <a href="#firepad-7">h</a>
        <input onblur="submitText('input-7')" type = "text" id = "input-7">
      </li>
      <li onclick ="firepadStyles('firepad-8')">
        <a href="#firepad-8">i</a>
          <input onblur="submitText('input-8')" type = "text" id = "input-8">
      </li>
      <li onclick ="firepadStyles('firepad-9')">
        <a href="#firepad-9">j</a>
        <input onblur="submitText('input-9')" type = "text" id = "input-9">
      </li>
      <li onclick ="firepadStyles('firepad-10')">
        <a href="#firepad-10">k</a>
        <input onblur="submitText('input-10')" type = "text" id = "input-10">
      </li>
      <li onclick ="firepadStyles('firepad-11')">
        <a href="#firepad-11">l</a>
        <input onblur="submitText('input-11')" type = "text" id = "input-11">
      </li>
      <li onclick ="firepadStyles('firepad-12')">
        <a href="#firepad-12">m</a>
        <input onblur="submitText('input-12')" type = "text" id = "input-12">
      </li>
      <li onclick ="firepadStyles('firepad-13')">
        <a href="#firepad-12">n</a>
        <input onblur="submitText('input-13')" type = "text" id = "input-13">
      </li>
      <li onclick ="firepadStyles('firepad-14')">
        <a href="#firepad-13">o</a>
        <input onblur="submitText('input-14')" type = "text" id = "input-14">
      </li>
      <li onclick ="firepadStyles('firepad-15')">
        <a href="#firepad-14">p</a>
        <input onblur="submitText('input-15')" type = "text" id = "input-15">
      </li>
      <li onclick ="firepadStyles('firepad-16')">
        <a href="#firepad-15">q</a>
        <input onblur="submitText('input-16')" type = "text" id = "input-16">
      </li>
      <li onclick ="firepadStyles('firepad-17')">
        <a href="#firepad-16">r</a>
        <input onblur="submitText('input-17')" type = "text" id = "input-17">
      </li>
      <li onclick ="firepadStyles('firepad-18')">
        <a href="#firepad-17">s</a>
        <input onblur="submitText('input-18')" type = "text" id = "input-18">
      </li>
      <li onclick ="firepadStyles('firepad-19')">
        <a href="#firepad-18">t</a>
        <input onblur="submitText('input-19')" type = "text" id = "input-19">
      </li>
      <li onclick ="firepadStyles('firepad-20')">
        <a href="#firepad-19">u</a>
        <input onblur="submitText('input-20')" type = "text" id = "input-20">
      </li>
      <li onclick ="firepadStyles('firepad-21')">
        <a href="#firepad-20">v</a>
        <input onblur="submitText('input-21')" type = "text" id = "input-21">
      </li>
      <li onclick ="firepadStyles('firepad-22')">
        <a href="#firepad-21">w</a>
        <input onblur="submitText('input-22')" type = "text" id = "input-22">
      </li>

  </div>

  <div class = firepad-wrapper>
    <div onclick ="firepadStyles('firepad-0')" class =" box" id="firepad-0"> a </div>
    <div onclick ="firepadStyles('firepad-1')" class =" box" id="firepad-1"> b </div>
    <div onclick ="firepadStyles('firepad-2')" class =" box" id="firepad-2"> c </div>
    <div onclick ="firepadStyles('firepad-3')" class =" box" id="firepad-3"> d </div>
    <div onclick ="firepadStyles('firepad-4')" class =" box" id="firepad-4"> e </div>
    <div onclick ="firepadStyles('firepad-5')" class =" box" id="firepad-5"> f </div>
    <div onclick ="firepadStyles('firepad-6')" class =" box" id="firepad-6"> g </div>
    <div onclick ="firepadStyles('firepad-7')" class =" box" id="firepad-7"> h </div>
    <div onclick ="firepadStyles('firepad-8')" class =" box" id="firepad-8"> i </div>
    <div onclick ="firepadStyles('firepad-9')" class =" box" id="firepad-9"> j </div>
    <div onclick ="firepadStyles('firepad-10')" class =" box" id="firepad-10"> k </div>
    <div onclick ="firepadStyles('firepad-11')" class =" box" id="firepad-11"> l </div>
    <div onclick ="firepadStyles('firepad-12')" class =" box" id="firepad-12"> m </div>
    <div onclick ="firepadStyles('firepad-13')" class =" box" id="firepad-13"> n </div>
    <div onclick ="firepadStyles('firepad-14')" class =" box" id="firepad-14"> o </div>
    <div onclick ="firepadStyles('firepad-15')" class =" box" id="firepad-15"> p </div>
    <div onclick ="firepadStyles('firepad-16')" class =" box" id="firepad-16"> q </div>
    <div onclick ="firepadStyles('firepad-17')" class =" box" id="firepad-17"> r </div>
    <div onclick ="firepadStyles('firepad-18')" class =" box" id="firepad-18"> s </div>
    <div onclick ="firepadStyles('firepad-19')" class =" box" id="firepad-19"> t </div>
    <div onclick ="firepadStyles('firepad-20')" class =" box" id="firepad-20"> u </div>
    <div onclick ="firepadStyles('firepad-21')" class =" box" id="firepad-21"> v </div>
    <div onclick ="firepadStyles('firepad-22')" class =" box" id="firepad-22"> w </div>

    <!-- <div class =" box"  id="image"> <img src="1.jpg"> </div> -->
  </div>

  <div class= "container">
    <div class= "bottom" id= toolbar-1> </div>
    <div class= "bottom" id= toolbar-2> </div>
    <div class= "bottom" id= toolbar-3> </div>
    <div class= "bottom" id= toolbar-4> </div>
  </div>


  <script>

    function init() {
      // // Initialize Firebase.
      // // TODO: replace with your Firebase project configuration.
      var config = {
        apiKey: "AIzaSyDTLvn12YhyZ86R_zHw2AauWa8swoJwRZc",
        authDomain: "collab-6fa95.firebaseapp.com",
        databaseURL: "https://collab-6fa95.firebaseio.com",
        projectId: "collab-6fa95",
        storageBucket: "collab-6fa95.appspot.com",
        messagingSenderId: "942968685131"

      };
      firebase.initializeApp(config);

      // the firepad with toolbar
      // for (var i = 0; i < 2; i++){
        var firepadRef = firebase.database().ref("new1");

        var codeMirror = CodeMirror(document.getElementById("toolbar-1"), { lineWrapping: true });

        var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror, {
          richTextShortcuts: true,
          richTextToolbar: true,
        });


        var firepadRef = firebase.database().ref("new2");

        var codeMirror = CodeMirror(document.getElementById("toolbar-2"), { lineWrapping: true });

        var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror, {
          richTextShortcuts: true,
          richTextToolbar: true,
        });



        var firepadRef = firebase.database().ref("new3");

        var codeMirror = CodeMirror(document.getElementById("toolbar-3"), { lineWrapping: true });

        var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror, {
          richTextShortcuts: true,
          richTextToolbar: true,
        });

        var firepadRef = firebase.database().ref("new4");

        var codeMirror = CodeMirror(document.getElementById("toolbar-4"), { lineWrapping: true });

        var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror, {
          richTextShortcuts: true,
          richTextToolbar: true,
        });




      for (var i = 0; i < 23; i++) {

        var firepadRef = firebase.database().ref("box"+i);

        var codeMirror = CodeMirror(document.getElementById("firepad-"+i), { lineWrapping: true });

        var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror, {
          richTextShortcuts: true,
          richTextToolbar: false,
        });
      }


  }

function updateName(){
  var x = [];
  var head;
  var elems = document.querySelectorAll('input');
  console.log(elems);


    console.log(elems.length);
    for (var i = 0; i < elems.length; i++){
      console.log("in here");
      var x = elems[i];
      var ref = firebase.database().ref("input-" + i);
      ref.limitToLast(1).on("value", gotData, errData);
    }

    function gotData(data){

            var text = data.val();
            var keys = Object.keys(text);
            console.log(keys);

            for(var i= 0; i < keys.length; i++){
              var k = keys[i];
              console.log(k);
              var head = text[k].heading;
              x.defaultValue = head;
              // x.style.background = "grey";
            }
          }

        function errData(err){
          console.log("ERROR!");
          console.log(err);
        }

}





function submitText(name){

  var text = document.getElementById(name).value;
  console.log(text);


      var ref = firebase.database().ref(name);

      var data = {
          heading: text
        }

      ref.push(data);
      console.log(data);
}




  function firepadStyles(name){
    clear = document.querySelectorAll(".firepad-richtext");
    console.log(clear);
    // clear = document.getElementsByClassName("firepad-richtext");
    for (var i = 0; i < clear.length; i++) {
      var x = clear[i];
      x.style.background = "rgb(255, 255, 255 ,0.5)";
      // x.style.background = "rgb(249, 246, 239,0.5)";
      x.style.zIndex = "0";
      x.style.width ="250px"
      x.style.padding ="0px";
      }

    elems = document.getElementById(name).querySelectorAll(".firepad-richtext");
    for (var i = 0; i < elems.length; i++) {
      var x = elems[i];
      // x.style.transition = "all 2s";
      x.style.background = "grey";
      x.style.zIndex = "2";
      x.style.width ="400px";
      }
    }





    function showBox(name){
      var x = document.getElementById(name);
        if (x.style.visibility == 'visible'){
          x.style.visibility = 'hidden';

        }
        else{

          x.style.visibility = 'visible';
        }

      }



  </script>
</body>
